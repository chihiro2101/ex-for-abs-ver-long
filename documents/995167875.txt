Hayes command set

history . background . prior to the introduction of the bulletin board system ( bbs ) , modems typically operated on direct-dial telephone lines that always began and ended with a known modem at each end . the modems operated in either '' originate '' or '' answer '' modes , manually switching between two sets of frequencies for data transfer . generally , the user placing the call would switch their modem to '' originate '' and then dial the number by hand . when the remote modem answered , already set to '' answer '' mode , the telephone handset was switched off and communications continued until the caller manually disconnected . when automation was required , it was commonly only needed on the answer side & nbsp ; — for instance , a bank might need to take calls from a number of branch offices for end-of-day processing . to fill this role , some modems included the ability to pick up the phone automatically when it was in answer mode , and clearing the line when the other user manually disconnected . the need for automated outbound dialling was considerably less common , and was handled through a separate peripheral device , a '' dialler '' . this was normally plugged into a separate input/output port on the computer ( typically an rs-232 port ) and programmed separately from the modem itself . this method of operation worked satisfactorily in the 1960s and early 1970s , when modems were generally used to connect dumb devices like computer terminals ( dialling out ) with smart mainframe computers ( answering ) . however , the microcomputer revolution of the 1970s led to the introduction of low-cost modems and the idea of a semi-dedicated point-to-point link was no longer appropriate . there were potentially thousands of users who might want to dial any of the other thousands of users , and the only solution at the time was to make the user dial manually . the computer industry needed a way to tell the modem what number to dial through software . the earlier separate dialers had this capability , but only at the cost of a separate port , which a microcomputer might not have available . another solution would have been to use a separate set of '' command pins '' dedicated to sending and receiving commands , another could have used a signal pin indicating that the modem should interpret incoming data as a command . both of these had hardware support in the rs-232 standard . however , many implementations of the rs-232 port on microcomputers were extremely basic , and some eliminated many of these pins as a cost saving measure . hayes ' solution . hayes communications introduced a solution in its 1981 smartmodem by using the existing data pins with no modification . instead , the modem itself could be switched between one of two modes : data mode in which the modem sends the data to the remote modem . ( a modem in data mode treats everything it receives from the computer as data and sends it across the phone line ) . command mode in which data is interpreted as commands to the local modem ( commands the local modem should execute ) . to switch from data mode to command mode , sessions sent an escape sequence string of three plus signs ( '' +++ '' ) followed by a pause of about a second . the pause at the end of the escape sequence was required to reduce the problem caused by in-band signaling : if any other data was received within one second of the three plus signs , it was not the escape sequence and would be sent as data . to switch back they sent the online command , '' ato '' . in actual use many of the commands automatically switched to the online mode after completion , and it is rare for a user to use the online command explicitly . in order to avoid licensing hayes 's patent , some manufacturers implemented the escape sequence without the time guard interval ( time independent escape sequence ( ties ) ) . this had a major denial of service security implication in that it would lead to the modem hanging up the connection should the computer ever try to transmit the byte sequence '' +++ath0 '' in data mode . for any computer connected to the internet through such a modem , this could be easily exploited by sending it a ping of death request containing the sequence '' +++ath0 '' in the payload . the computer operating system would automatically try to reply the sender with the same payload , immediately disconnecting itself from the internet , as the modem would interpret the icmp packet 's data payload as a hayes command . the same error would also trigger if , for example , the user of the computer ever tried to send an e-mail containing the aforementioned string . commands . the hayes command set includes commands for various phone-line operations such as dialing and hanging-up . it also includes various controls to set up the modem , including a set of register commands which allowed the user to directly set the various memory locations in the original hayes modem . the command set was copied largely verbatim , including the meaning of the registers , by almost all early 300 baud modem manufacturers , of which there were quite a few . the expansion to 1200 and 2400 baud required the addition of a small set of new commands , some of them prefixed with an ampersand ( '' & '' ) to denote those dedicated to new functionality . hayes itself was forced to quickly introduce a 2400 baud model shortly after their 1200 , and the command sets were identical as a time-saving method . frank durda iv , '' the at command set reference - history '' , 1993 essentially by accident , this allowed users of existing 1200 baud modems to use the new hayes 2400 models without changing their software . this re-inforced the use of the hayes versions of these commands . years later , the telecommunications industry association ( tia ) /electronic industries alliance ( eia ) raised the 2400-baud command set into a formal standard with the title data transmission systems and equipment - serial asynchronous automatic dialing and control , tia/eia-602 . however , hayes communications were slow to release modems supporting higher speeds or compression , and three other companies led the way here & nbsp ; — microcom , u.s . robotics and telebit . each of these three used its own additional command-sets instead of waiting for hayes to lead the way . by the early-1990s , there were four major command sets in use , and a number of versions based on one of these . things became simpler again during the widespread introduction of 14.4 and 28.8 kbit/s modems in the early 1990s . slowly , a set of commands based heavily on the original hayes extended set using '' & '' commands became popular , and then universal . only one other command set has remained popular , the us robotics set from their popular line of modems . description . the following text lists part of the hayes command set , also called the at commands : '' at '' meaning 'attention ' . each command string is prefixed with '' at '' , and a number of discrete commands can be concatenated after the '' at '' . the hayes command set can subdivide into four groups : basic command set & nbsp ; – a capital character followed by a digit . for example , m1 . extended command set & nbsp ; – an '' & '' ( ampersand ) and a capital character followed by a digit . this extends the basic command set . for example , & m1 . note that m1 is different from & m1 . proprietary command set & nbsp ; – usually starting either with a backslash ( “ \ ” ) or with a percent sign ( “ % ” ) ; these commands vary widely among modem manufacturers . register commands & nbsp ; – sr n where r is the number of the register to be changed , and n is the new value that is assigned . a register represents a specific physical location in memory . modems have small amounts of memory on board . the fourth set of commands serves for entering values into a particular register ( memory location ) . for example , s7 60 instructs the modem to '' set register 7 to the value 60 '' . registers usually control aspects of the modem operation ( e.g . transmission strength , modulation parameters ) and are usually specific to a particular model . although the command-set syntax defines most commands by a letter-number combination ( l0 , l1 etc . ) , the use of a zero is optional . in this example , '' l0 '' equates to a plain '' l '' . keep this in mind when reading the table below . when in data mode , an escape sequence can return the modem to command mode . the normal escape sequence is three plus signs ( '' +++ '' ) , and to disambiguate it from possible real data , a guard timer is used : it must be preceded by a pause , not have any pauses between the plus signs , and be followed by a pause ; by default , a '' pause '' is one second and '' no pause '' is anything less . syntactical definitions . the following syntactical definitions apply : at commands reference guide carriage return character , is the command line and result code terminator character , which value , in decimal ascii between 0 and 255 , is specified in register s3 . the default value is 13 . linefeed character , is the character recognised as line feed character . its value , in decimal ascii between 0 and 255 , is specified in register s4 . the default value is 10 . the line feed character is output after the carriage return character if verbose result codes are used ( v1 option is used ) ; otherwise , if numeric format result codes are used ( v0 option is used ) , it will not appear in the result codes . name enclosed in angle brackets is a syntactical element . they do not appear in the command line . . optional subparameter of a command or an optional part of at information response is enclosed in square brackets . brackets themselves do not appear in the command line . when the subparameter is not given in at commands which have a read command , the new value equals its previous value . in at commands which do not store the values of any of their subparameters , and so have not a read command , which are called action type commands , the action should be done on the basis of the recommended default setting of the subparameter . modem initialization . a string can contain many hayes commands placed together , so as to optimally prepare the modem to dial out or answer , e.g . at & f & d2 & c1s0 0x4 . most modem software supported a user supplied initialization string , which was typically a long concatenated at command which was sent to the modem upon launch . initialization strings : why , what & where the v.250 specification requires all dces to accept a body ( after '' at '' ) of at least 40 characters of concatenated commands . . example session . the following represents two computers , computer a and computer b , both with modems attached , and the user controlling the modems with terminal emulator software . terminal-emulator software typically allows the user to send hayes commands directly to the modem , and to see the responses . in this example , the user of computer a makes the modem dial the phone number of modem b at phone number 555-1234 ( long distance ) . after every command and response , there is a carriage return sent to complete the command . gsm/3g modems typically support the etsi gsm 07.07/3gpp ts 27.007 at command set extensions , although how many commands are implemented varies . most usb modem vendors , such as huawei , sierra wireless , option , have also defined proprietary extensions for radio mode selection ( gsm/3g preference ) or similar . some recent high speed modems provide a virtual ethernet interface instead of using a point-to-point protocol ( ppp ) for the data connection because of performance reasons ( ppp connection is only used between the computer and the modem , not over network ) . the set-up requires vendor-specific at command extensions . sometimes the specifications for these extensions are openly available , other times the vendor requires an nda for access to these . . voice command set . modems with voice or answering-machine capabilities support a superset of these commands to enable digital audio playback and recording . see also . access point name ( apn ) command and data modes ( modem ) itu-t recommendations : h.324 ( video ) t.31 ( fax ) motorola phone at commands . notes and references . external links . list of at commands : basic ( hayes ) , extended , proprietary hayes at command reference manual a list of hayes at commands 3gpp.org , 3gpp at command set for user equipment modem initialisation string extended hayes at command parameters for sms ( dead ) determining your class of fax / modem openmoko : at commands cell modem commands itu standard v.250 at commands reference guide from telit ( dead )