Evaluation function

in chess . evaluation functions in chess consist of a material balance term that dominates the evaluation , plus a set of positional terms usually totaling no more than the value of a pawn , though in some positions the positional terms can get much larger , such as when checkmate is imminent . an evaluation function also implicitly encodes the value of the right to move , which can vary from a small fraction of a pawn to win or loss . in the endgame , it is possible to construct positions where whoever moves , wins , though the position is otherwise in balance ; it is also possible to construct positions where whoever must move , loses ( zugzwang ) . an evaluation function for chess might take the form c 1 material + c 2 mobility + c 3 king safety + c 4 center control + c 5 pawn structure + c 6 king tropism + . each of the terms is a weight multiplied by a difference factor : the value of white 's material or positional score minus black 's . the material score is obtained by assigning a value in pawn-units to each of the pieces . the conventional values are : queen 9 , rook 5 ; knight or bishop 3 ; pawn 1 ; the king is assigned an arbitrarily large value , usually larger than the total value of all the other pieces . not just the absolute value of the material , but also the ratio between white and black material matters : sacrificing a pawn in the opening may confer a positional advantage ( the material ratio is scarcely affected ) , but the plus of a pawn in a king and pawn end game is usually sufficient to win ( ratio of material is large ) . this ratio is usually implemented as an exchange-down bonus according to the rule of thumb : 'trade pieces but not pawns when ahead , and vice versa when behind . ' the mobility score is the number of legal moves available to a player , or alternately the sum of the number of spaces attacked or defended by each piece , including spaces occupied by friendly or opposing pieces . effective mobility , or the number of '' safe '' spaces a piece may move to , may also be taken into account . effective mobility for queens is often very low , though the number of her legal moves may be quite high . the king safety score is a set of bonuses and penalties assessed for the location of the king and the configuration of pawns and pieces adjacent to or in front of the king , and opposing pieces bearing on spaces around the king . center control is derived from how many pawns and pieces occupy or bear on the four center spaces and sometimes the 12 spaces of the extended center . pawn structure is a set of penalties and bonuses for various strengths and weaknesses in pawn structure , such as penalties for doubled and isolated pawns . king tropism is a bonus for closeness ( or penalty for distance ) of certain pieces , especially queens and knights , to the opposing king . the weights c1 , etc . , are n't necessarily constant - they are application coefficients that can vary with stage of game ( opening , middle game , endgame ) , pieces on the board ( e.g . presence or absence of queens ) , other characteristics of the position , or high level strategy or plans ( e.g . assign higher weight to pieces that bear on squares around the opposing king if the plan is a kingside attack ) . the focus , and therefore the relevant terms and weights of the evaluation function , differ depending on the stage of the game . in the opening , the dominant considerations are development of the minor pieces , castling and king safety , and control of the center . penalties are usually assessed for undeveloped pieces and delayed castling . in endgames , either pawn promotion or mating with the pieces are the dominant considerations . in mating situations , the relevant factors are distance of the target king from the edge or corner of the board , and proximity of the king and mating pieces to the opposing king . for king and pawn endgames , the relevant factors are proximity of the kings to pawns , advancement of pawns , and controlling the queening square ( s ) . the equation is a conceptual model . in a particular implementation , each composite pseudo-term may be represented by a handful to possibly hundreds of individual terms , each with its own weight or computed value . for example , pawn structure can have terms for isolated , doubled , backward , advanced , passed , protected passed , connected passed , holes , semi-open and open files , pawn majorities , phalanxes , and many other formations . other special factors that are often considered are : development of the minor pieces , rooks on open files or the seventh rank , doubled rooks , outpost knights ( knights in central locations protected by a pawn and not subject to attack by an opposing pawn ) , possession of the bishop pair , bishops on the long diagonals , pieces occupying or bearing on spaces around the opposing king , and mobility of the kings ( kings should n't be 'cramped ' , hence subject to mate-on-the-move ) . some terms , such as king safety in an endgame with few pieces , can and should be ignored depending on context . the terms composing some factors , like king safety , combine non-linearly - one weakness in king safety , like an open file adjacent to the king , may be penalized for example , by 1/4 pawn , but two weaknesses may need to be penalized one or even two full pawns , and three weaknesses by a piece , a rook or even more because checkmate is becoming a likely possibility . factors involved with pawn advance and promotion also combine non-linearly . the typical pawn-multiple values assigned to the pieces are n't constant either , but depend on context : undeveloped pieces are worth far less as are pieces with reduced mobility for any reason : bishops confined by their own pawns ( '' the bad bishop '' ) ; knights lose value as the position is cleared of pieces , and bishops and rooks gain value ; queens are worth substantially more if the opposing king is n't sheltered against checks . evaluation functions typically contain dozens to hundreds of individual terms , and the evaluation of a position typically ranges from plus or minus a small fraction of a pawn . larger evaluations indicate a material imbalance or that a win of material is usually imminent . very large evaluations may indicate that checkmate is imminent . in practice , effective evaluation functions are created not by ever expanding the list of evaluated parameters , but by careful tuning of the weights relative to each other , of a modest set of parameters such as those described above . toward this end , exemplary positions from master games are employed , and the efficacy of the evaluation function measured by the percentage of moves selected that agree with the choices of the masters . piece-square tables . an important technique in evaluation since at least the early 1990s , is the use of piece-square tables ( also called piece-value tables ) for evaluation . each table is a set of 64 values corresponding to the squares of the chessboard . there is a separate table for each kind of piece : king , queen , knight , bishop , rook , pawn . there is a separate ( flipped ) set of tables for the opposing pieces . the values in the tables are bonuses/penalties for the location of each piece on each space . the values encode a composite of many subtle factors difficult to quantify analytically . basic tables can be constructed from principles of development , center control , king safety , etc . in master level programs and beyond , the tables are constructed from a composite of positions occupied by the pieces in master games , adjusted for the application . for example , knights are seldom found on left and right edges of the board in master games , so one may assign a penalty value to those spaces of the knight piece-square table proportionate to how seldom a knight is found there in master games . there is often two sets of tables : one for the opening , and one for the endgame ; positions of the middle game are interpolated between the two . authors of chess programs tend to keep the composition of their piece-square tables , as well as the methods used to create them , secret , because a great deal of time , effort , testing and playing experience go into constructing them , and careful tuning here offers a competitive advantage . evaluation in monte-carlo tree search . chess machines like leela chess zero have a substantively different search and evaluation paradigm than the conventional alphabeta/minimax scheme with leaf node evaluation . in monte-carlo tree search , the search space of all variations from a node is sampled by rolling out , or playing the game to the end by alternately choosing a random move for each side . the result , win , lose or draw , is backed up to the starting node . the move selected is the one which leads to a position with the greatest number of wins , or highest average score , though no specific line of play is associated with the move . an analogous situation is the percentage of wins/draws/losses accumulated for various openings employed in master games . if one is choosing an opening , one will tend to choose from the ones with the greatest percentage of wins or greatest percentage of wins+draws . and similarly for each variation within the opening , if statistics are available . the weakness of such a scheme is that the strongest line ( s ) of play for each side may not be part of that opening - they may be narrow opportunities in an opening which is otherwise weak . so 'evaluation ' in monte-carlo implementations is a probability of winning rather than a numerical valuation of a position . in go . evaluation functions in go take into account both territory controlled , influence of stones , number of prisoners and life and death of groups on the board .