Chroma subsampling

rationale . digital signals are often compressed to reduce file size and save transmission time . since the human visual system is much more sensitive to variations in brightness than color , a video system can be optimized by devoting more bandwidth to the luma component ( usually denoted y ' ) , than to the color difference components cb and cr . in compressed images , for example , the 4:2:2 ycbcr scheme requires two-thirds the bandwidth of non-subsampled '' 4:4:4 '' rgb . this reduction results in almost no visual difference as perceived by the viewer . how subsampling works . at normal viewing distances , there is no perceptible loss incurred by sampling the color detail at a lower rate , i.e . with a lower resolution . in video systems , this is achieved through the use of color difference components . the signal is divided into a luma ( y ' ) component and two color difference components ( chroma ) . a variety of filtering methods can be used to arrive at the resolution-reduced chroma values . luma ( y ' ) is differentiated from luminance ( y ) by the presence of gamma correction in its calculation , hence the prime symbol added here . a gamma-corrected signal has the advantage of emulating the logarithmic sensitivity of human vision , with more levels dedicated to the darker levels than the lighter ones . as a result , it is ubiquitously used in the source tristimulus signal , the r ' g ' b ' input . examples of such color spaces include srgb , the tv rec . & nbsp ; 601 , rec . & nbsp ; 709 , and rec . & nbsp ; 2020 ; the concept is also generalized to optical transfer functions in rec . & nbsp ; 2020 . poynton , charles . '' yuv and luminance considered harmful : a plea for precise terminology in video '' . why 4k video looks better on a 1080p screen – the daily note ( with graphics explaining chroma subsampling . . sampling systems and ratios . the subsampling scheme is commonly expressed as a three-part ratio j : a : b ( e.g . 4:2:2 ) or four parts , if alpha channel is present ( e.g . 4:2:2:4 ) , that describe the number of luminance and chrominance samples in a conceptual region that is j pixels wide and 2 pixels high . the parts are ( in their respective order ) : j : horizontal sampling reference ( width of the conceptual region ) . usually , 4 . a : number of chrominance samples ( cr , cb ) in the first row of j pixels . b : number of changes of chrominance samples ( cr , cb ) between first and second row of j pixels . note that b has to be either zero or equal to a ( except in rare irregular cases like 4:4:1 and 4:2:1 , which do not follow this convention ) . alpha : horizontal factor ( relative to first digit ) . may be omitted if alpha component is not present , and is equal to j when present . this notation is not valid for all combinations and has exceptions , e.g . 4:1:0 ( where the height of the region is not 2 pixels , but 4 pixels , so if 8 bits per component are used , the media would be 9 bits per pixel ) and 4:2:1 . the mapping examples given are only theoretical and for illustration . also note that the diagram does not indicate any chroma filtering , which should be applied to avoid aliasing . to calculate required bandwidth factor relative to 4:4:4 ( or 4:4:4:4 ) , one needs to sum all the factors and divide the result by 12 ( or 16 , if alpha is present ) . types of sampling and subsampling . 4:4:4 . each of the three ycbcr components has the same sample rate , thus there is no chroma subsampling . this scheme is sometimes used in high-end film scanners and cinematic post-production . note that '' 4:4:4 '' may instead be referring to rgb color space , which implicitly also does not have any chroma subsampling . formats such as hdcam sr can record 4:4:4 r ' g ' b ' over dual-link hd-sdi . 4:2:2 . the two chroma components are sampled at half the horizontal sample rate of luma : the horizontal chroma resolution is halved . this reduces the bandwidth of an uncompressed video signal by one-third . many high-end digital video formats and interfaces use this scheme : avc-intra digital betacam betacam sx dvcpro50 and dvcpro hd digital-s ccir 601 / serial digital interface / d1 prores xdcam canon xf-300 . 4:2:1 . this sampling mode is not expressible in j : a : b notation . '' 4:2:1 '' is an obsolete term from a previous notational scheme , and very few software or hardware codecs use it . cb horizontal resolution is half that of cr ( and a quarter of the horizontal resolution of y ) . 4:1:1 . in 4:1:1 chroma subsampling , the horizontal color resolution is quartered , and the bandwidth is halved compared to no chroma subsampling . initially , 4:1:1 chroma subsampling of the dv format was not considered to be broadcast quality and was only acceptable for low-end and consumer applications . however , dv-based formats ( some of which use 4:1:1 chroma subsampling ) have been used professionally in electronic news gathering and in playout servers . dv has also been sporadically used in feature films and in digital cinematography . in the ntsc system , if the luma is sampled at 13.5 & nbsp ; mhz , then this means that the cr and cb signals will each be sampled at 3.375 & nbsp ; mhz , which corresponds to a maximum nyquist bandwidth of 1.6875 & nbsp ; mhz , whereas traditional '' high-end broadcast analog ntsc encoder '' would have a nyquist bandwidth of 1.5 & nbsp ; mhz and 0.5 & nbsp ; mhz for the i/q channels . however , in most equipment , especially cheap tv sets and vhs/betamax vcrs , the chroma channels have only the 0.5 & nbsp ; mhz bandwidth for both cr and cb ( or equivalently for i/q ) . thus the dv system actually provides a superior color bandwidth compared to the best composite analog specifications for ntsc , despite having only 1/4 of the chroma bandwidth of a '' full '' digital signal . formats that use 4:1:1 chroma subsampling include : dvcpro ( ntsc and pal ) ntsc dv and dvcam d-7 . 4:2:0 . in 4:2:0 , the horizontal sampling is doubled compared to 4:1:1 , but as the cb and cr channels are only sampled on each alternate line in this scheme , the vertical resolution is halved . the data rate is thus the same . this fits reasonably well with the pal color encoding system , since this has only half the vertical chrominance resolution of ntsc . it would also fit extremely well with the secam color encoding system , since like that format , 4:2:0 only stores and transmits one color channel per line ( the other channel being recovered from the previous line ) . however , little equipment has actually been produced that outputs a secam analogue video signal . in general , secam territories either have to use a pal-capable display or a transcoder to convert the pal signal to secam for display . different variants of 4:2:0 chroma configurations are found in : all iso/iec mpeg and itu-t vceg h.26x video coding standards including h.262/mpeg-2 part 2 implementations ( although some profiles of mpeg-4 part 2 and h.264/mpeg-4 avc allow higher-quality sampling schemes such as 4:4:4 ) dvd-video and blu-ray disc . pal dv and dvcam hdv avchd and avc-intra apple intermediate codec most common jpeg and mjpeg implementations vc-1 cb and cr are each subsampled at a factor of 2 both horizontally and vertically . there are three variants of 4:2:0 schemes , having different horizontal and vertical siting . in mpeg-2 , cb and cr are cosited horizontally . cb and cr are sited between pixels in the vertical direction ( sited interstitially ) . in jpeg/jfif , h.261 , and mpeg-1 , cb and cr are sited interstitially , halfway between alternate luma samples . in 4:2:0 dv , cb and cr are co-sited in the horizontal direction . in the vertical direction , they are co-sited on alternating lines . most digital video formats corresponding to pal use 4:2:0 chroma subsampling , with the exception of dvcpro25 , which uses 4:1:1 chroma subsampling . both the 4:1:1 and 4:2:0 schemes halve the bandwidth compared to no chroma subsampling . with interlaced material , 4:2:0 chroma subsampling can result in motion artifacts if it is implemented the same way as for progressive material . the luma samples are derived from separate time intervals , while the chroma samples would be derived from both time intervals . it is this difference that can result in motion artifacts . the mpeg-2 standard allows for an alternate interlaced sampling scheme , where 4:2:0 is applied to each field ( not both fields at once ) . this solves the problem of motion artifacts , reduces the vertical chroma resolution by half , and can introduce comb-like artifacts in the image . original . this image shows a single field . the moving text has some motion blur applied to it . image:420-progressive-single-field.png 4:2:0 progressive sampling applied to moving interlaced material . note that the chroma leads and trails the moving text . this image shows a single field . 4:2:0 interlaced sampling applied to moving interlaced material . this image shows a single field . in the 4:2:0 interlaced scheme , however , vertical resolution of the chroma is roughly halved , since the chroma samples effectively describe an area 2 samples wide by 4 samples tall instead of 2×2 . as well , the spatial displacement between both fields can result in the appearance of comb-like chroma artifacts . original still image . 4:2:0 progressive sampling applied to a still image . both fields are shown . 4:2:0 interlaced sampling applied to a still image . both fields are shown . if the interlaced material is to be de-interlaced , the comb-like chroma artifacts ( from 4:2:0 interlaced sampling ) can be removed by blurring the chroma vertically . . 4:1:0 . this ratio is possible , and some codecs support it , but it is not widely used . this ratio uses half of the vertical and one-fourth the horizontal color resolutions , with only one-eighth of the bandwidth of the maximum color resolutions used . uncompressed video in this format with 8-bit quantization uses 10 bytes for every macropixel ( which is 4×2 pixels ) . it has the equivalent chrominance bandwidth of a pal i signal decoded with a delay line decoder , and still very much superior to ntsc . some video codecs may operate at 4:1:0.5 or 4:1:0.25 as an option , so as to allow similar to vhs quality . 3:1:1 . used by sony in their hdcam high definition recorders ( not hdcam sr ) . in the horizontal dimension , luma is sampled horizontally at three quarters of the full hd sampling rate 1440 samples per row instead of 1920 . chroma is sampled at 480 samples per row , a third of the luma sampling rate . in the vertical dimension , both luma and chroma are sampled at the full hd sampling rate ( 1080 samples vertically ) . artifacts . chroma subsampling suffers from two main types of artifacts , causing degradation more noticeable than intended where colors change abruptly . gamma error . gamma-corrected signals like y'cbcr have in issue where chroma errors '' bleed '' into luma . in those signals , a low chroma actually makes a color appear less bright than one with equivalent luma . as a result , when a saturated color blends with an unsaturated or complementary color , a loss of luminance occurs at the border . this can be seen in the example between magenta and green . to arrive at a set of subsampled values that more closely resembles the original , it is necessary to undo the gamma correction , perform the calculation , and then step back into the gamma-corrected space . more efficient approximations are also possible , such as with a luma-weighted average or iteratively with lookup tables in webp and sjpeg 's '' sharp yuv '' feature . . out-of-gamut colors . another artifact that can occur with chroma subsampling is that out-of-gamut colors can occur upon chroma reconstruction . suppose the image consisted of alternating 1-pixel red and black lines and the subsampling omitted the chroma for the black pixels . chroma from the red pixels will be reconstructed onto the black pixels , causing the new pixels to have positive red and negative green and blue values . as displays can not output negative light ( negative light does not exist ) , these negative values will effectively be clipped , and the resulting luma value will be too high . similar artifacts arise in the less artificial example of gradation near a fairly sharp red/black boundary . other types of filtering during subsampling can also cause colors to go out of gamut . terminology . the term yuv refers to an analog encoding scheme while y'cbcr refers to a digital encoding scheme . one difference between the two is that the scale factors on the chroma components ( u , v , cb , and cr ) are different . however , the term yuv is often used erroneously to refer to y'cbcr encoding . hence , expressions like '' 4:2:2 yuv '' always refer to 4:2:2 y'cbcr , since there simply is no such thing as 4 : x : x in analog encoding ( such as yuv ) . in a similar vein , the term luminance and the symbol y are often used erroneously to refer to luma , which is denoted with the symbol y ' . note that the luma ( y ' ) of video engineering deviates from the luminance ( y ) of color science ( as defined by cie ) . luma is formed as the weighted sum of gamma-corrected ( tristimulus ) rgb components . luminance is formed as a weighed sum of linear ( tristimulus ) rgb components . in practice , the cie symbol y is often incorrectly used to denote luma . in 1993 , smpte adopted engineering guideline eg & nbsp ; 28 , clarifying the two terms . note that the prime symbol ' is used to indicate gamma correction . similarly , the chroma/chrominance of video engineering differs from the chrominance of color science . the chroma/chrominance of video engineering is formed from weighted tristimulus components , not linear components . in video engineering practice , the terms chroma , chrominance , and saturation are often used interchangeably to refer to chrominance . history . chroma subsampling was developed in the 1950s by alda bedford for the development of color television by rca , which developed into the ntsc standard ; luma–chroma separation was developed earlier , in 1938 by georges valensi . through studies , he showed that the human eye has high resolution only for black and white , somewhat less for '' mid-range '' colors like yellows and greens , and much less for colors on the end of the spectrum , reds and blues . using this knowledge allowed rca to develop a system in which they discarded most of the blue signal after it comes from the camera , keeping most of the green and only some of the red ; this is chroma subsampling in the yiq color space and is roughly analogous to 4:2:1 subsampling , in that it has decreasing resolution for luma , yellow/green , and red/blue . see also . color space smpte - society of motion picture and television engineers digital video hdtv ycbcr ypbpr ccir 601 4:2:2 sdtv yuv color color vision rod cell cone cell . references . poynton , charles . '' digital video and hdtv : algorithms and interfaces '' . u.s . : morgan kaufmann publishers , 2003 . kerr , douglas a . '' chrominance subsampling in digital images '' . external links . chroma sampling : an investigation